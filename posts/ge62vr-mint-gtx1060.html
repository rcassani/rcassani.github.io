<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>LinuxMint-18 + GE62VR + GTX1060 + CUDA - CastorisCausa</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="../posts/ge62vr-mint-gtx1060">

        <meta name="author" content="Raymundo Cassani" />
        <meta name="description" content="There are several posts with instructions for properly installing NVIDIA drivers in Linux. Unfortunately, sometimes they’re outdated, moreover it’s not possible to cover the immensity of system configurations. After searching and reading some of that information, I came down to this guide for my system (Mint18 in MSI ..." />

        <meta property="og:site_name" content="CastorisCausa" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="LinuxMint-18 + GE62VR + GTX1060 + CUDA"/>
        <meta property="og:url" content="../posts/ge62vr-mint-gtx1060"/>
        <meta property="og:description" content="There are several posts with instructions for properly installing NVIDIA drivers in Linux. Unfortunately, sometimes they’re outdated, moreover it’s not possible to cover the immensity of system configurations. After searching and reading some of that information, I came down to this guide for my system (Mint18 in MSI ..."/>
        <meta property="article:published_time" content="2017-02-21" />
            <meta property="article:section" content="Blog" />
            <meta property="article:author" content="Raymundo Cassani" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="../theme/css/bootstrap.sandstone.min.css" type="text/css"/>
    <link href="../theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="../theme/css/pygments/native.css" rel="stylesheet">
    <link href="../theme/tipuesearch/tipuesearch.css" rel="stylesheet">
        <link href="../theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="../theme/css/style.css" type="text/css"/>
        <link href="../custom_css/castoris.css" rel="stylesheet">





</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="../" class="navbar-brand">
CastorisCausa            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="../pages/about-me">
                             About
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><span>
                <form class="navbar-search" action="/search.html">
                  <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input" required>
                </form></span>
              </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
            <ol class="breadcrumb">
                <li><a href=".." title="CastorisCausa"><i class="fa fa-home fa-lg"></i></a></li>
                <li class="active">LinuxMint-18 + <span class="caps">GE62VR</span> + <span class="caps">GTX1060</span> + <span class="caps">CUDA</span></li>
            </ol>
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="../posts/ge62vr-mint-gtx1060"
                       rel="bookmark"
                       title="Permalink to LinuxMint-18 + GE62VR + GTX1060 + CUDA">
                        LinuxMint-18 + <span class="caps">GE62VR</span> + <span class="caps">GTX1060</span> + <span class="caps">CUDA</span>
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2017-02-21T19:00:00-05:00"> Tue 21 February 2017</time>
    </span>





    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>There are several posts with instructions for properly installing <strong><span class="caps">NVIDIA</span> drivers in Linux</strong>. Unfortunately, sometimes they&#8217;re outdated, moreover it&#8217;s not possible to cover the immensity of system configurations. After searching and reading some of that information, I came down to this guide for my system (<strong>Mint18</strong> in <strong><span class="caps">MSI</span>-<span class="caps">GE62VR</span></strong>)<code>*</code>. The guide consists of two&nbsp;parts:</p>
<ol>
<li>Install <span class="caps">NVIDIA</span>&nbsp;drivers</li>
<li>Install and test <span class="caps">CUDA</span>&nbsp;drivers.</li>
</ol>
<p><code>* Similar steps should apply for other dual monitor setups in Ubuntu and Ubuntu-based distributions.</code></p>
<h2>System: <a href="https://www.msi.com/Laptop/GE62VR-6RF-Apache-Pro.html"><span class="caps">MSI</span> <span class="caps">GE62VR</span></a></h2>
<h4>Operative&nbsp;System</h4>
<ul>
<li><a href="https://www.linuxmint.com/">Linux Mint 18</a> 64-bit&nbsp;(Cinnamon)</li>
</ul>
<h4>Hardware</h4>
<ul>
<li><a href="https://www.nvidia.com/en-us/geforce/products/10series/laptops/#specs"><span class="caps">NVIDIA</span> <span class="caps">GTX</span>&nbsp;1060</a></li>
<li><a href="https://en.wikipedia.org/wiki/Intel_HD_and_Iris_Graphics#Skylake">Intel <span class="caps">HD</span> Graphics 530 (integrated <span class="caps">GPU</span>)</a></li>
</ul>
<h2>1 Install <span class="caps">NVIDIA</span>&nbsp;driver</h2>
<p>If the laptop&#8217;s screen and external screen are working properly go to the <span class="caps">CUDA</span>&nbsp;section.</p>
<p>It seems that common problems at installing <span class="caps">NVIDIA</span> drivers in Mint (and Ubuntu) are: the laptop&#8217;s monitor is disabled when a external monitor is connected; or Cinnamon crashes in &#8220;fallback mode&#8221; when the system boots without external the&nbsp;monitor.</p>
<p>So far the solution that worked for me, is to change to <strong>Nouveau</strong> drivers, purge any <strong><span class="caps">NVIDIA</span></strong> remaining and perform a clean <strong><span class="caps">NVIDIA</span></strong>&nbsp;installation</p>
<ul>
<li>
<p>Open the <strong>Driver Manager</strong>, and verify that the utilized drivers are the <strong>Nouveau display driver</strong> (change, and apply changes if necessary). Reboot your&nbsp;system.</p>
</li>
<li>
<p>Once in <strong>Nouveau</strong> driver, purge the <strong><span class="caps">NVIDIA</span></strong>&nbsp;drivers</p>
<div class="highlight"><pre><span></span>$ sudo apt-get purge nvidia*
$ sudo apt-get update
$ sudo apt-get upgrade
</pre></div>


</li>
<li>
<p>Unplug the <strong>DigitalDisplay</strong>&nbsp;adapter</p>
</li>
<li>
<p>Open the <strong>Driver Manager</strong> select the recommended <strong><span class="caps">NVIDIA</span> binary driver</strong>  (nvidia-367 at&nbsp;08/feb/2017)</p>
</li>
<li>
<p>Restart your&nbsp;system</p>
</li>
<li>
<p>The system should boot using the laptop&#8217;s monitor as&nbsp;normally</p>
</li>
<li>
<p>Connect the external monitor with the <strong>DigitalDisplay</strong>&nbsp;adapter</p>
</li>
<li>
<p>Open <strong>Display</strong> to configure the position and behaviour of the&nbsp;monitors</p>
</li>
<li>
<p>Open <strong><span class="caps">NVDIA</span> X Server Settings</strong> to configure the external&nbsp;monitor</p>
</li>
</ul>
<!---
A problem I've found is that, booting the system with external monitor connectedn , makes it primary and it's not possible that configuration from 'Screens'
-->

<h2>2 Install and Test <span class="caps">CUDA</span>&nbsp;driver</h2>
<p>Once the <strong><span class="caps">NVIDIA</span> driver</strong> are properly installed, it&#8217;s time to install the <strong><span class="caps">CUDA</span> driver</strong>. If you&#8217;re not sure what&#8217;s the <span class="caps">CUDA</span> driver check this <a href="http://www.nvidia.com/object/cuda_home_new.html">link</a></p>
<ul>
<li>Download the <a href="https://developer.nvidia.com/cuda-downloads"><strong><span class="caps">CUDA</span>&nbsp;driver</strong></a></li>
</ul>
<p><center>
<img src="../images/cuda_driver_mint_download.png" style="width: 800px;"/>
</br><br />
</center></p>
<ul>
<li>
<p>Change the downloaded file to executable and execute&nbsp;it</p>
<div class="highlight"><pre><span></span>$ chmod +x cuda_8.0.61_375.26_linux.run
$ sudo sh cuda_8.0.61_375.26_linux.run --override
</pre></div>


</li>
<li>
<p>Installation parameters. Select <strong><span class="caps">NO</span></strong> when the <span class="caps">CUDA</span> installer ask to install <strong><span class="caps">NVIDIA</span> Accelerated Graphics Driver for Linux</strong> as the <span class="caps">NVIDIA</span> driver is already&nbsp;installed.</p>
<div class="highlight"><pre><span></span>Do you accept the previously <span class="nb">read</span> EULA?
accept/decline/quit: accept

You are attempting to install on an unsupported configuration. Do you wish to <span class="k">continue</span>?
<span class="o">(</span>y<span class="o">)</span>es/<span class="o">(</span>n<span class="o">)</span>o <span class="o">[</span> default is no <span class="o">]</span>: y

Install NVIDIA Accelerated Graphics Driver <span class="k">for</span> Linux-x86_64 375.26?
<span class="o">(</span>y<span class="o">)</span>es/<span class="o">(</span>n<span class="o">)</span>o/<span class="o">(</span>q<span class="o">)</span>uit: n

Install the CUDA 8.0 Toolkit?
<span class="o">(</span>y<span class="o">)</span>es/<span class="o">(</span>n<span class="o">)</span>o/<span class="o">(</span>q<span class="o">)</span>uit: y

Enter Toolkit Location
<span class="o">[</span> default is /usr/local/cuda-8.0 <span class="o">]</span>:

Do you want to install a symbolic link at /usr/local/cuda?
<span class="o">(</span>y<span class="o">)</span>es/<span class="o">(</span>n<span class="o">)</span>o/<span class="o">(</span>q<span class="o">)</span>uit: y

Install the CUDA 8.0 Samples?
<span class="o">(</span>y<span class="o">)</span>es/<span class="o">(</span>n<span class="o">)</span>o/<span class="o">(</span>q<span class="o">)</span>uit: y

Enter CUDA Samples Location
<span class="o">[</span> default is /home/cassani <span class="o">]</span>: /usr/local/cuda-8.0

Installing the CUDA Toolkit in /usr/local/cuda-8.0 ...
Missing recommended library: libGLU.so
Missing recommended library: libX11.so
Missing recommended library: libXi.so
Missing recommended library: libXmu.so

Installing the CUDA Samples in /usr/local/cuda-8.0 ...
Copying samples to /usr/local/cuda-8.0/NVIDIA_CUDA-8.0_Samples now...
Finished copying samples.
</pre></div>


</li>
<li>
<p>Prepare the <span class="caps">CUDA</span> environment by adding the following 3 lines to your <code>.bashrc</code> file</p>
<div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">CUDA_HOME</span><span class="o">=</span>/usr/local/cuda    
<span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda/lib64:<span class="nv">$LD_LIBRARY_PATH</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda/bin:<span class="nv">$PATH</span>
</pre></div>


</li>
<li>
<p>And source&nbsp;it</p>
<div class="highlight"><pre><span></span>$ <span class="nb">source</span> ~/.bashrc
</pre></div>


</li>
</ul>
<!---
An alternavive for CUDA environment is:
Create the file `/etc/profile.d/cuda.sh` with the line
export PATH=$PATH:/usr/local/cuda/bin
Create the file `/etc/ld.so.conf.d/cuda.conf` with the line
/usr/local/cuda/lib64
$ sudo ldconfig
-->

<ul>
<li>
<p>Verify Cuda Compiler&nbsp;driver</p>
<div class="highlight"><pre><span></span>$ nvcc --version

nvcc: NVIDIA <span class="o">(</span>R<span class="o">)</span> Cuda compiler driver
Copyright <span class="o">(</span>c<span class="o">)</span> 2005-2016 NVIDIA Corporation
Built on Tue_Jan_10_13:22:03_CST_2017
Cuda compilation tools, release 8.0, V8.0.61
</pre></div>


</li>
<li>
<p>Install g++ (If you&nbsp;haven&#8217;t)</p>
<div class="highlight"><pre><span></span>$ sudo apt-get install g++
$ sudo apt-get install build-essential
$ sudo apt-get install make
</pre></div>


</li>
<li>
<p><strong>(Optional)</strong> Install additional libraries to be able to build most of the&nbsp;samples:</p>
<div class="highlight"><pre><span></span>$ sudo apt-get install freeglut3-dev build-essential libx11-dev libxmu-dev libxi-dev libgl1-mesa-glx libglu1-mesa libglu1-mesa-dev
</pre></div>


</li>
</ul>
<p></br>
<strong>Building the&nbsp;samples</strong></p>
<p>Several of the samples require <strong><span class="caps">GL</span> libraries</strong>, to find the correct path for those libraries, the file <code>fingllib.mk</code> is used. As <strong>Linux Mint</strong> is not an officially supported distribution a slight change is necessary in the <code>fingllib.mk</code> file. To avoid editing all instances of this file, its multiple copies will be replaced with a symbolic&nbsp;link.</p>
<ul>
<li>
<p>Go to <code>/common</code> folder in the samples&nbsp;path</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> /usr/local/cuda/samples/common
</pre></div>


</li>
<li>
<p>Open <code>fingllib.mk</code> and, in the line 62 change <code>ubuntu</code> for <code>'ubuntu\|linuxmint'</code>  </p>
<p><strong>Do not forget the simple&nbsp;quotes</strong></p>
</li>
<li>
<p>Search for all the instances of <code>fingllib.mk</code> outside of <code>/common</code> and replace them with a symbolic link to <code>usr/local/cuda/samples/common/fingllib.mk</code>.</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> /usr/local/cuda/samples/common
$ sudo find .. ! -path <span class="s2">&quot;*/common*&quot;</span> -name findgllib.mk -exec ln -sf /usr/local/cuda/samples/common/findgllib.mk <span class="o">{}</span> <span class="s1">&#39;;&#39;</span>
</pre></div>


</li>
<li>
<p>Run the commnad <code>make</code> while in the samples&nbsp;path</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> /usr/local/cuda/samples
$ sudo make
</pre></div>


</li>
</ul>
<p><strong>Running the sample&nbsp;binaries</strong></p>
<ul>
<li>
<p>Go to the sample binaries&nbsp;folder</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> /usr/local/cuda/samples/bin/x86_64/linux/release
</pre></div>


</li>
<li>
<p>Verify that your <span class="caps">CUDA</span> Capable device is&nbsp;found</p>
<div class="highlight"><pre><span></span>$ ./deviceQuery

./deviceQuery Starting...

CUDA Device Query <span class="o">(</span>Runtime API<span class="o">)</span> version <span class="o">(</span>CUDART static linking<span class="o">)</span>

Detected <span class="m">1</span> CUDA Capable device<span class="o">(</span>s<span class="o">)</span>

Device 0: <span class="s2">&quot;GeForce GTX 1060&quot;</span>
CUDA Driver Version / Runtime Version          8.0 / 8.0
CUDA Capability Major/Minor version number:    6.1
...
</pre></div>


</li>
<li>
<p>Sample <code>fluidsGL</code></p>
<div class="highlight"><pre><span></span>$ ./fluidsGL
</pre></div>


<p><center>
<img src="../images/fluidsGL.gif" style="width: 500px;"/>
</br><br />
</center></p>
</li>
</ul>
<h3>References</h3>
<p><a href="http://blog.csdn.net/kernlen/article/details/53882490">http://blog.csdn.net/kernlen/article/details/53882490</a></p>
<p><a href="http://blog.csdn.net/wopawn/article/details/52302164">http://blog.csdn.net/wopawn/article/details/52302164</a></p>
<p><a href="http://blog.csdn.net/lee_j_r/article/details/52693724">http://blog.csdn.net/lee_j_r/article/details/52693724</a></p>
<p><a href="http://www.voidcn.com/blog/u010696366/article/p-3712151.html">http://www.voidcn.com/blog/u010696366/article/p-3712151.html</a></p>
<p><a href="http://stackoverflow.com/questions/34617236/cuda-missing-libgl-so-libglu-so-and-libx11-so">http://stackoverflow.com/questions/34617236/cuda-missing-libgl-so-libglu-so-and-libx11-so</a></p>
<p><a href="https://www.pugetsystems.com/labs/hpc/NVIDIA-CUDA-with-Ubuntu-16-04-beta-on-a-laptop-if-you-just-cannot-wait-775/">https://www.pugetsystems.com/labs/hpc/<span class="caps">NVIDIA</span>-<span class="caps">CUDA</span>-with-Ubuntu-16-04-beta-on-a-laptop-if-you-just-cannot-wait-775/</a></p>
<p><a href="http://docs.nvidia.com/cuda/cuda-installation-guide-linux/#axzz4Y9Whzcjf">http://docs.nvidia.com/cuda/cuda-installation-guide-linux/#axzz4Y9Whzcjf</a></p>
<p><a href="https://devtalk.nvidia.com/default/topic/936429/-solved-tensorflow-with-gpu-in-anaconda-env-ubuntu-16-04-cuda-7-5-cudnn-/">https://devtalk.nvidia.com/default/topic/936429/-solved-tensorflow-with-gpu-in-anaconda-env-ubuntu-16-04-cuda-7-5-cudnn-/</a></p>
<p><a href="http://developer.download.nvidia.com/compute/cuda/6_5/rel/docs/CUDA_Getting_Started_Linux.pdf">http://developer.download.nvidia.com/compute/cuda/6_5/rel/docs/CUDA_Getting_Started_Linux.pdf</a></p>
<p><a href="https://forums.linuxmint.com/viewtopic.php?t=226145">https://forums.linuxmint.com/viewtopic.php?t=226145</a></p>
<!--
Code for button
<a class="btn btn-primary" href="#">Booton</a>
-->
            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'castoriscausa'; // required: replace example with your forum shortname

                var disqus_url = 'http://castoriscausa.com/posts/ge62vr-mint-gtx1060';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://github.com/rcassani"><i class="fa fa-github-square fa-lg"></i> GitHub</a></li>
                <li class="list-group-item"><a href="#"><i class="fa fa-#-square fa-lg"></i> #</a></li>
              </ul>
            </li>





    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://www.castoriscausa.com" target="_blank">
                Home
            </a>
        </li>
        <li class="list-group-item">
            <a href="#" target="_blank">
                #
            </a>
        </li>
      </ul>
    </li>
    <li class="list-group-item">
        <ul class="list-group" id="links">
            <img width="100%" class="img-thumbnail" src="../images/side_image_500.jpg"/>
        </ul>
    </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2017 Ray Cassani
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>              <p><small>  <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
    Content
  licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>, except where indicated otherwise.
</small></p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="../theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="../theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'castoriscausa'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-86432394-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>